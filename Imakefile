XCOMM $XFree86: xc/lib/fontconfig/Imakefile,v 1.3 2002/05/21 17:08:41 keithp Exp $

#define IHaveSubdirs
#define PassCDebugFlags

LINTSUBDIRS=src fc-cache fc-list

SUBDIRS=fontconfig $(LINTSUBDIRS)

FONTCONFIG_REVISION=1

#ifndef FontconfigDir
#define FontconfigDir /etc/fonts
#endif

FONTCONFIGDIR=FontconfigDir

SUBSTVARS=prefix=$(PROJECTROOT) \
	  exec_prefix=$(BINDIR) \
	  libdir=$(USRLIBDIR) \
	  includedir=$(INCROOT) \
	  PACKAGE_VERSION=$(SOFONTCONFIGREV).$(FONTCONFIG_REVISION)

MakeSubdirs($(SUBDIRS))
DependSubdirs($(SUBDIRS))
MakeLintLibSubdirs($(LINTSUBDIRS))
MakeLintSubdirs($(LINTSUBDIRS),install.ln,install.ln)

InstallNonExecFileNoClobber(fonts.conf,$(FONTCONFIGDIR))
InstallNonExecFileNoClobber(fonts.dtd,$(FONTCONFIGDIR))

all:: fonts.conf

fonts.conf: fonts.conf.in
	RemoveFile($@)
	sh ./setfontdirs /usr/share/fonts $(FONTDIR)

clean::
	RemoveFile(fonts.conf)

all:: fontconfig-config.script

fontconfig-config.script: fontconfig-config.in
	RemoveFile($@)
	sh config/config-subst $(SUBSTVARS) < $< > $@

InstallScript(fontconfig-config,$(BINDIR))

clean::
	RemoveFile(fontconfig-config.script)
	
all:: fontconfig.pc

fontconfig.pc: fontconfig.pc.in
	RemoveFile($@)
	sh config/config-subst $(SUBSTVARS) < $< > $@

InstallNonExecFile(fontconfig.pc,$(USRLIBDIR)/pkgconfig)

clean::
	RemoveFile(fontconfig.pc)

